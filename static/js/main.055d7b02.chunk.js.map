{"version":3,"sources":["Components/Cmirror.tsx","assets/favicon-32x32.png","utils/data.js","utils/webgl.js","assets/jessica-pamp-sGRMspZmfPE-unsplash.jpg","assets/anh-nguyen-_Uqj5BQb-mw-unsplash.jpg","Components/ZCanvas.tsx","Components/Tools.tsx","Components/Settings.tsx","Components/PresetModal.tsx","Components/VaribleModal.tsx","Components/CreditModal.tsx","App.tsx","index.tsx"],"names":["Cmirror","props","options","tabSize","mode","theme","matchBrackets","lineNumbers","value","onBeforeChange","editor","data","onChange","commonVex","preset","vex","frag","name","note","attribute","type","description","codeMirrorThemeNames","createShader","gl","source","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","Error","getShaderInfoLog","getProgram","vsource","fsource","vertShader","VERTEX_SHADER","fragShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","simpleBindBuffer","size","offset","stride","indices","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","index","getAttribLocation","vertexAttribPointer","FLOAT","indexesBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","enableVertexAttribArray","bindTexture","image","texture","createTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","generateMipmap","uniform1i","getUniformLocation","ZCanvas","canvasRef","useRef","useState","setImage","background","form","setForm","time","setTime","timer","setTimer","autoRun","setAutoRun","undefined","error","setError","loadImage","useCallback","src","console","log","img","Image","textureImage","onload","current","width","height","getContext","viewport","canvas","useEffect","preserveDrawingBuffer","vertexSource","fragmentSource","uTime","vertices","tex","clearColor","clear","COLOR_BUFFER_BIT","useProgram","uniform2f","parseFloat","uniform1f","drawArrays","TRIANGLE_STRIP","draw","match","newTimer","window","setInterval","oldTime","gap","clearInterval","e","message","textureImage2","Container","direction","style","textAlign","ref","objectFit","className","placeholder","val","obj","Option","scale","icon","onClick","input","document","createElement","accept","onchange","files","reader","FileReader","event","target","result","readAsDataURL","click","auto","url","toDataURL","a","download","href","body","appendChild","remove","checked","minHeight","readOnly","RGB2Vec","rgbInput","setRgbInput","rgbOutput","setRgbOutput","out","rgb","m","exec","toLowerCase","r","parseInt","groups","R","toFixed","g","G","b","B","rgb2vec","_e","Tools","defaultSettings","cmTheme","Settings","SetCodeMirrorTheme","prop","map","PresetModal","closeHandler","onClose","visible","Title","Content","item","xs","onPreset","Action","passive","VaribleModal","Column","label","CreditModal","pkg","version","Date","getFullYear","App","setVertexSource","setFragmentSource","presetModalVisible","setPresetModalVisible","creditModalVisible","setCreditModalVisible","varibleModalVisible","setVaribleModalVisible","settings","setSettings","storage","localStorage","JSON","parse","softDarkTheme","Themes","createFromDark","palette","Header","alignContent","sm","md","marginRight","alt","Anchor","h4","margin","justify","news","stringify","switchThemes","open","themes","themeType","padding","rel","initialValue","Item","code","ReactDOM","render","StrictMode","getElementById"],"mappings":"kpCAWe,SAASA,EAAQC,GAC9B,IAAMC,EAAU,CACdC,QAAS,EACTC,KAAM,oBACNC,MAAOJ,EAAMI,MACbC,eAAe,EACfC,aAAa,GAGf,OACI,cAAC,aAAD,CACEC,MAAOP,EAAMO,MACbC,eAAgB,SAACC,EAAQC,EAAMH,GAC7BP,EAAMW,SAASJ,IAEjBN,QAASA,IC1BF,ICATW,EACJ,wKACWC,EAAS,CACpB,CACEC,IAAKF,EACLG,KAAM,wXACNC,KAAM,6BAER,CACEF,IAAKF,EACLG,KAAM,0UACNC,KAAM,6BAER,CACEF,IAAKF,EACLG,KAAM,+hCACNC,KAAM,oDAER,CACEF,IAAKF,EACLG,KAAM,sPACNC,KAAM,4BAER,CACEF,IAAKF,EACLG,KAAM,09BACNC,KAAM,6BAIGC,EAAO,CAClB,CACEC,UAAW,YACXC,KAAM,OACNH,KAAM,YACNI,YAAa,4BAEf,CACEF,UAAW,YACXC,KAAM,OACNH,KAAM,YACNI,YAAa,8CAEf,CACEF,UAAW,UACXC,KAAM,YACNH,KAAM,WACNI,YAAa,4BAEf,CACEF,UAAW,UACXC,KAAM,OACNH,KAAM,cACNI,YAAa,kCAEf,CACEF,UAAW,UACXC,KAAM,QACNH,KAAM,QACNI,YAAa,4DAIJC,EAAuB,CAClC,WACA,aACA,SACA,SACA,kBACA,WACA,WACA,aACA,cACA,eACA,SACA,aACA,SACA,aACA,UACA,UACA,eACA,gBACA,UACA,UACA,cACA,eACA,YACA,WACA,OACA,UACA,SACA,cACA,YACA,UACA,kBACA,iBACA,qBACA,WACA,MACA,WACA,WACA,UACA,QACA,OACA,MACA,QACA,OACA,eACA,eACA,eACA,gBACA,iBACA,aACA,WACA,OACA,YACA,YACA,OACA,aACA,wBACA,0BACA,OACA,WACA,cACA,UACA,WACA,OACA,QACA,WCxHF,SAASC,EAAaC,EAAIC,EAAQL,GAChC,IAAIM,EAASF,EAAGD,aAAaH,GAG7B,GAFAI,EAAGG,aAAaD,EAAQD,GACxBD,EAAGI,cAAcF,IACZF,EAAGK,mBAAmBH,EAAQF,EAAGM,gBACpC,MAAM,IA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","file":"static/js/main.055d7b02.chunk.js","sourcesContent":["import { Controlled as CodeMirror } from \"react-codemirror2\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/mode/clike/clike.js\";\n// import \"codemirror/theme/dracula.css\";\n\ninterface ICmirror {\n  value: string;\n  onChange: (a: string) => void;\n  theme: string;\n}\n\nexport default function Cmirror(props: ICmirror) {\n  const options = {\n    tabSize: 4,\n    mode: \"x-shader/x-vertex\",\n    theme: props.theme,\n    matchBrackets: true,\n    lineNumbers: true,\n  };\n\n  return (      \n      <CodeMirror\n        value={props.value}\n        onBeforeChange={(editor, data, value) => {\n          props.onChange(value);\n        }}\n        options={options}\n      ></CodeMirror>\n  );\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAIiElEQVRYhZ3XWVOb5xnGcZ2242naHvQDpNMk0/agnc7kqAedaTptZtxU2yt5axIvcRzHjhcW4wVCvGJjsFkMxmB2jAGzGTBgMKBdQhuYfTMGzGIQi9nEIunfAxkisEic3h9A1/vqp+t+HolEbznUH//lsipIuVR3OmXp8Tn7fEXY1FzJ+ZWZgksr07kRk5MZkfbxlBvJo4kxiqmkpHfe9nN/PNgY8HuXPiB9VR08v/TkNItV55gvD2e2+Dwz+ZeYyrmKI/06L5NvMJoYy3DsLV5EJ809j0hO7Q9P++D/D247vM1tOhnr0geurKhOsVR7hsXKUOYfhvOq8ALTeZeZzL7KRNp1Xt65yeitOF7EJDB4PYnnV1J4dj6N3rCs5a5TOdEj4WU//2nhTSff85hOtLq0gSw3nMJZc5aFR2HMlX7HqwcXmc69wmTWNcZToxhLuslIfDwvbiQyeO0Ozy/f5dl36fScy6Lr1D06TubRdrSwqeVg8W/fLtx84kO38eTEqiaI5boQnI/PslARxlzJeWYKLjF1LwJHZiTjd6MZux3DSFw8Q9GJDFxNpv9SKn3hGfSczaYrOJeOE/m0Hink6aESmveXjZk/ffTnHw63BHzg1gc4VtXBvK33UNRtBiKS6b+QSm9YBt1ncugMuk/78QJavy7i6cFSmvaWY/tvJeYdNWM68RP/3wRt4dtWdYHtm71nCy8wfX/NO2rde3izd2gm3SE5dAbep/3YA1oOF9P8xUPsn1dg3V2FWVmDSVqHTtxg1wv6n73xAKua4Jjl+hD/3pm+3nHfe1/y5/2AlkPFNB8ow/bZIyy7qmkUajFK6tGIG6iTqKgWqy9vCF+uD/zjcn3Iitf7W2Z9vTP8ed+h/+Kb3m1HCnn6ZQlN+8uxfVqJZedjGuVPMIjrUYtVPJGoqJKoKZNonIUyzbvfP8CTMzmLVeeYL9voPbGldxq9YZlbelu93phkdejFDajEKmolKh5J1JRKNDyQasiVaBNFIpFINFcd+JvFylDn3Bv99vG+uZV33o95Uy9W8ViipkKipkSiIV+qIUeqJVOhf1WT1PeOaOFR+D5fb0fmNcbvRjGWFLOx31t5f1VC84Ey7D7eBl9viZpyiZpiuZbqkzasqc8YNE8y71jGlDe4U/Sq6EL2Bu8UP/3249265r2vzL+3VI3miIWWpB6GdRMszaywNq4VNyUX2rkh08eLpvMut23wTvDX70y6T2/hvafK6y2vw3bISFd8J2OqlzgdS+ABjwfmHUsMWSZxuz24Vtw8vNLJdbmBCLlBJ5rMurrg6/3iZgKDkb7eWXSH3KMzII82X++9FbR808Cz+BbG60ZYGlsEj/cNl6aXGdJNYL7dy8MjVu7tMfKycxbXqofSiE4i5QYuyY2Ey43Doq28+zZ459N2tJCOU5U8T7IwUTeAc2Te+3rAyuwK4yYH7Sm9NBy3UizTkifVki3Vkr3HyFj7K1yrHsqud3NNbuCi3Mi3chNnBJNTNHY7xjUSd4uh6Nsbvc9k0xteyFCqlsmGHpzDr/C4vYGuhVWmrZM8T+/DFmClTq6mUqLmoURDoVTDfamWTKmWzF0GRtpmcLs8lEV1EyE3cEFuJFRuIkQwESA0roqGYxMcXu8Unl/LZjS7lil1G86hSTwuNwDuJRez7Q6G83voCG3ErGxAJ26gQayiZlO/70m1ZEi1pO8y8qJ5GrfLQ3lsD1fkRr6TGzknN3FKMHFCaOSoYJ4QjeeVWWd0NpyDY3hWXd7AFRcLfQ5eVnTSG6mn+WCVt9+KWkzSerSb+l3s0+80qY7UnQaGmqbxuD2Ux/WseXNWMBEsNHJcaORrwcxBwWwWuRacaR6XG+eQg8n6dgaT1HQEldJy6M1+++5z70pVUyTVkCfVkiXVkirVcXengQHrFB63h0eJfevepwUTgUIjx4RGDivMfKGwsFcwJ4lG0mt3910soCs4l/YT+bQeKeLpl6U07fMeoZYd3n7rX/e7VqJ67a3e4H1XqiNZaaDfPOkNv/1sszffCGYOKczsV1j4VGFht2BVip6G5PyqM+j+vN9+K7373J93wbq3jhSZjiSlgT6TN7w6pZ/zm7yPCGa+VJjZp7CwR2FFqbDOCoLFe3lt+6YwteWrTftcUYNxk3e5H+87Mh2JCgM9BgceD1Sn9q97B/l6KyzsVVjYrbCiUFqRKG3J66dh81el7zfvL1u2bbHP170lmvV+p0p1JMl0JCgMdGkn8HigJmPAr/cBhYXPFBZ2KazIlTb+o7AtbZfZf7fhTmDbUxn1/T5v8Oudu+Yt05Eo0xMvGOhQTYAHarIGCPPxPrrJe9cOKycD20nLekF5tSP2jRtRvZC/zSSra93sXbLJO1mmI0GmJ04w0FY/Dh6oyx167d24wfvYgSZu3XxGQ70Dh2MZj/ds6AJ+4fdeqP2k7v16sWrCn3f6a+9bMj0xgoGW2pcA1OUNrXsH7rRwI6yDisIR+nvncbm8m3N2bhWNcZpb6S/GKjQT7/kNX5sqsfrDMrF6okjirViWj3ecTM8NwUDT4zEAVEXDRB1tpii5n5bGKRbnVwFYXfXQ3T1PXsEIwaFdfLK7iX/ssI/9TbD/6QfD16ZIonnvvlTb6usdK9MTLTdgqxwFYNnpwjHqXDuPcIwv0VA7Tmx0H1/sb0KmtPGJ0sbHSjsfKZvsf5U9fffHk30mX6jfliLRRSXI9CsxMj3XBQOWitH1S8XSoos22wwFaQN8e6KF/crX/VZakSptbFfa+ZfSvvzRDnvkX/5t+Wl/zXwnWqb9Q6RUn6EvGl4c6V9AVTJC0vlOgnZb+FrwrtTPffot9obP/lNpT/67sumHvX/SNxLd9utQuXFHkNyceExoNBxWmEcPKMwrnymsy7sUlklBabOKFda72wWr8uOPjf5/5X7mf2nb0jGsqCrxAAAAAElFTkSuQmCC\"","const commonVex =\n  \"attribute vec3 aPosition;\\nattribute vec2 aTexCoord;\\nvarying lowp vec2 vTexCoord;\\nvoid main(){\\n    vTexCoord = aTexCoord;\\n    gl_Position=vec4(aPosition,1.0);\\n}\";\nexport const preset = [\n  {\n    vex: commonVex,\n    frag: \"#ifdef GL_ES\\nprecision mediump float;\\n#endif\\nvarying lowp vec2 vTexCoord;\\nuniform sampler2D uSampler;\\nvoid main(){\\n    // vTexCoord是当前处理的点在图片里的坐标 \\n    // texture2D 是提取纹理中对应坐标的颜色\\n    gl_FragColor = texture2D(uSampler,vTexCoord);\\n}\",\n    name: \"图片-基础\",\n  },\n  {\n    vex: commonVex,\n    frag: \"#ifdef GL_ES\\nprecision mediump float;\\n#endif\\nvarying lowp vec2 vTexCoord;\\nuniform sampler2D uSampler;\\nvoid main(){\\n    lowp vec4 color = texture2D(uSampler,vTexCoord);\\n    lowp float gray = color[0]*0.3 + color[1]*0.59 + color[2]*0.11;\\n    lowp vec4 new_color = vec4(gray,gray,gray,1);\\n    gl_FragColor = new_color;\\n}\",\n    name: \"图片-灰度\",\n  },\n  {\n    vex: commonVex,\n    frag: \"#ifdef GL_ES\\nprecision mediump float;\\n#endif\\nvarying lowp vec2 vTexCoord;\\nuniform sampler2D uSampler;\\nuniform lowp vec2 uResolution;\\n\\nlowp vec4 getColor(lowp vec2 pos) {\\n  // step(a,b) b>=a 返回1 否则为0\\n  lowp float valid =\\n      step(0.0, pos.x) * step(pos.x, 1.0) * step(0.0, pos.y) * step(pos.y, 1.0);\\n  ; //如果合法返回1\\n  return valid * texture2D(uSampler, pos) + vec4(.0, .0, .0, .0);\\n}\\n\\nlowp vec4 getAdv(lowp float rad) {\\n  lowp vec2 texel = vec2(1.0 / uResolution.x, 1.0 / uResolution.y);\\n\\n  lowp vec4 c1 = getColor(vTexCoord + texel * rad * vec2(-1, 1));\\n  lowp vec4 c2 = getColor(vTexCoord + texel * rad * vec2(1, 1));\\n  lowp vec4 c3 = getColor(vTexCoord + texel * rad * vec2(1, -1));\\n  lowp vec4 c4 = getColor(vTexCoord + texel * rad * vec2(1, 1));\\n\\n  lowp vec4 color = c1 + c2 + c3 + c4;\\n\\n  return color * 0.25;\\n}\\n\\nvoid main() {\\n  // 模糊半径\\n  lowp float rad = 4.0;\\n  // 取特定点的颜色\\n  gl_FragColor = getAdv(rad);\\n}\",\n    name: \"均值模糊（测试）\",\n  },\n  {\n    vex: commonVex,\n    frag: \"#ifdef GL_ES\\nprecision mediump float;\\n#endif\\nuniform float uTime;\\nuniform lowp vec2 uResolution;\\n\\nvoid main(){\\n    vec2 st = gl_FragCoord.xy/uResolution.xy;\\n    gl_FragColor = vec4(abs(sin(uTime))*st.x,abs(cos(uTime))*st.y,1.0,1.0);\\n}\",\n    name: \"时间测试\",\n  },\n  {\n    vex: commonVex,\n    frag: \"#ifdef GL_ES\\nprecision mediump float;\\n#endif\\nvarying lowp vec2 vTexCoord;\\nuniform sampler2D uSampler;\\nuniform vec2 uResolution;\\nuniform float uTime;\\n\\nfloat random (in float x) {\\n    return fract(sin(x)*1e4);\\n}\\n\\nvoid main(){\\n    float wave = 0.08; //偏移系数\\n    vec2 grid = vec2(80,100);\\n\\n    vec2 st = vTexCoord * grid; //细分行数\\n    vec2 ipos = floor(st); // 提取整数部分\\n    \\n    float dir = (mod(ipos.y,2.0)-0.5)*2.0; // 运动方向\\n\\n    float x = vTexCoord.x + random(ipos.y*uTime)*wave*dir; // 移动后的x\\n\tvec2 newCoord = vec2(x,vTexCoord.y);\\n    vec4 color = texture2D(uSampler,newCoord);\\n\\n    // 添加一些扫描线色块\\n    // color *= step(random(ipos.y*uTime),0.95);\\n\\n    // 添加左右偏移色块\\n    color *= step(random(ipos.x+random(ipos.y*uTime)*dir*wave),0.95);\\n  \\n    gl_FragColor = color;\\n}\",\n    name: \"故障图像\",\n  },\n];\n\nexport const note = [\n  {\n    attribute: \"attribute\",\n    type: \"vec3\",\n    name: \"aPosition\",\n    description: \"输入坐标\",\n  },\n  {\n    attribute: \"attribute\",\n    type: \"vec2\",\n    name: \"aTexCoord\",\n    description: \"顶点的纹理坐标\",\n  },\n  {\n    attribute: \"uniform\",\n    type: \"sampler2D\",\n    name: \"uSampler\",\n    description: \"纹理数据\",\n  },\n  {\n    attribute: \"uniform\",\n    type: \"vec2\",\n    name: \"uResolution\",\n    description: \"画布的大小\",\n  },\n  {\n    attribute: \"uniform\",\n    type: \"float\",\n    name: \"uTime\",\n    description: \"Shader 运行的时间（秒）\",\n  },\n];\n\nexport const codeMirrorThemeNames = [\n  \"3024-day\",\n  \"3024-night\",\n  \"abbott\",\n  \"abcdef\",\n  \"ambiance-mobile\",\n  \"ambiance\",\n  \"ayu-dark\",\n  \"ayu-mirage\",\n  \"base16-dark\",\n  \"base16-light\",\n  \"bespin\",\n  \"blackboard\",\n  \"cobalt\",\n  \"colorforth\",\n  \"darcula\",\n  \"dracula\",\n  \"duotone-dark\",\n  \"duotone-light\",\n  \"eclipse\",\n  \"elegant\",\n  \"erlang-dark\",\n  \"gruvbox-dark\",\n  \"hopscotch\",\n  \"icecoder\",\n  \"idea\",\n  \"isotope\",\n  \"juejin\",\n  \"lesser-dark\",\n  \"liquibyte\",\n  \"lucario\",\n  \"material-darker\",\n  \"material-ocean\",\n  \"material-palenight\",\n  \"material\",\n  \"mbo\",\n  \"mdn-like\",\n  \"midnight\",\n  \"monokai\",\n  \"moxer\",\n  \"neat\",\n  \"neo\",\n  \"night\",\n  \"nord\",\n  \"oceanic-next\",\n  \"panda-syntax\",\n  \"paraiso-dark\",\n  \"paraiso-light\",\n  \"pastel-on-dark\",\n  \"railscasts\",\n  \"rubyblue\",\n  \"seti\",\n  \"shadowfox\",\n  \"solarized\",\n  \"ssms\",\n  \"the-matrix\",\n  \"tomorrow-night-bright\",\n  \"tomorrow-night-eighties\",\n  \"ttcn\",\n  \"twilight\",\n  \"vibrant-ink\",\n  \"xq-dark\",\n  \"xq-light\",\n  \"yeti\",\n  \"yonce\",\n  \"zenburn\",\n];\n","/**\n * 编译着色器\n *\n * @param {WebGLRenderingContext} gl - gl上下文\n * @param {string} source - 着色器源码\n * @param {*} type - 类型，gl.VERTEX_SHADER 或 gl.FRAGMENT_SHADER\n * @returns\n */\nfunction createShader(gl, source, type) {\n  let shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    throw new Error(`ShaderInfoLog:\\n${gl.getShaderInfoLog(shader)}`);\n  }\n  return shader;\n}\n\n/**\n * 编译并连接着色器\n *\n * @export\n * @param {WebGLRenderingContext} gl - gl上下文\n * @param {string} vsource - 顶点着色器源码\n * @param {string} fsource - 片段着色器源码\n * @returns {WebGLProgram|null} - 连接好的WebGLProgram，失败则返回null\n */\nexport function getProgram(gl, vsource, fsource) {\n  let vertShader = createShader(gl, vsource, gl.VERTEX_SHADER);\n  let fragShader = createShader(gl, fsource, gl.FRAGMENT_SHADER);\n  let shaderProgram = gl.createProgram();\n  gl.attachShader(shaderProgram, vertShader);\n  gl.attachShader(shaderProgram, fragShader);\n  gl.linkProgram(shaderProgram);\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n    throw new Error(`ProgramInfoLog:\\n${gl.getProgramInfoLog(shaderProgram)}`);\n  }\n  return shaderProgram;\n}\n\n/**\n * 简单缓冲绑定\n *\n * @param {*} gl - gl上下文\n * @param {*} shaderProgram - shaderProgram\n * @param {*} name - 着色器里的属性名称\n * @param {*} data - 数据源\n * @param {*} size - 一组数据长度\n * @param {*} offset - 偏移\n * @param {*} stride - 步长\n * @param {*} indices - 索引（如果有）\n * @returns buffer\n */\nexport function simpleBindBuffer(\n  gl,\n  shaderProgram,\n  name,\n  data,\n  size,\n  offset,\n  stride,\n  indices = null\n) {\n  const buffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\n  const index = gl.getAttribLocation(shaderProgram, name);\n  gl.vertexAttribPointer(index, size, gl.FLOAT, false, offset, stride);\n\n  if (indices != null) {\n    const indexesBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexesBuffer);\n    gl.bufferData(\n      gl.ELEMENT_ARRAY_BUFFER,\n      new Uint16Array(indices),\n      gl.STATIC_DRAW\n    );\n  }\n\n  gl.enableVertexAttribArray(index);\n  return buffer;\n}\n\n/**\n *\n *\n * @param {*} gl - gl上下文\n * @param {*} shaderProgram - shaderProgram\n * @param {*} image - 图片元素\n * @returns\n */\nexport function bindTexture(gl, shaderProgram, image) {\n  let texture = gl.createTexture();\n  //绑定纹理\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  //指定二维纹理贴图，详细级别。颜色组件，数据格式，数据类型，数据源\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n  //设置纹理在放大和缩小时候采用的采样方案。\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n  gl.texParameteri(\n    gl.TEXTURE_2D,\n    gl.TEXTURE_MIN_FILTER,\n    gl.LINEAR_MIPMAP_NEAREST\n  );\n  //生成mipmap webgl 1.0 只能给图片边长为2的幂的图片生成 mipmap\n  gl.generateMipmap(gl.TEXTURE_2D);\n  //结束设置\n  //gl.activeTexture(gl.TEXTURE0);\n  gl.uniform1i(gl.getUniformLocation(shaderProgram, \"uSampler\"), 0);\n}\n\nexport function draw(gl, vertexSource, fragmentSource, image, uTime=0) {\n  //正方形\n  const vertices = [-1, -1, 0, -1, 1, 0, 1, -1, 0, 1, 1, 0];\n  //纹理对应坐标\n  const tex = [0, 1, 0, 0, 1, 1, 1, 0];\n  gl.clearColor(0, 0, 0, 1);\n  gl.clear(gl.COLOR_BUFFER_BIT);\n  //创建着色器\n  const shaderProgram = getProgram(gl, vertexSource, fragmentSource);\n  //设置缓冲\n  simpleBindBuffer(gl, shaderProgram, \"aPosition\", vertices, 3, 0, 0);\n  simpleBindBuffer(gl, shaderProgram, \"aTexCoord\", tex, 2, 0, 0);\n  gl.useProgram(shaderProgram);\n  //未来添加其他可以绑定的参数也在这里：\n  // - canvas 的大小\n  gl.uniform2f(\n    gl.getUniformLocation(shaderProgram, \"uResolution\"),\n    parseFloat(image.width),\n    parseFloat(image.height)\n  );\n  // - 运行时间\n  gl.uniform1f(gl.getUniformLocation(shaderProgram,\"uTime\"),uTime);\n  //\n  bindTexture(gl, shaderProgram, image);\n  //加载完纹理后再画图\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n}\n","export default __webpack_public_path__ + \"static/media/jessica-pamp-sGRMspZmfPE-unsplash.5cffdaca.jpg\";","export default __webpack_public_path__ + \"static/media/anh-nguyen-_Uqj5BQb-mw-unsplash.a6275f3c.jpg\";","import { useCallback, useRef, useEffect, useState } from \"react\";\nimport { draw } from \"../utils/webgl.js\";\nimport textureImage from \"../assets/jessica-pamp-sGRMspZmfPE-unsplash.jpg\";\nimport textureImage2 from \"../assets/anh-nguyen-_Uqj5BQb-mw-unsplash.jpg\";\nimport { Upload, Download } from \"@geist-ui/icons\";\nimport {\n  Button,\n  Toggle,\n  Select,\n  Divider,\n  Text,\n  Textarea,\n  Grid,\n} from \"@geist-ui/core\";\n\ninterface IZCanvas {\n  vertexSource: string;\n  fragmentSource: string;\n}\n\ninterface IForm {\n  background: BaseCanvas;\n}\n\ntype BaseCanvas = \"Image\" | \"Image2\" | \"CustomImage\";\ntype Error = string | undefined;\n\nfunction ZCanvas(props: IZCanvas) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [image, setImage] = useState<HTMLImageElement | null>(null);\n  const [form, setForm] = useState<IForm>({ background: \"Image\" });\n  const [time, setTime] = useState<number>(0);\n  const [timer, setTimer] = useState<number | null>(null);\n  const [autoRun, setAutoRun] = useState(true);\n  const [error, setError] = useState<Error>(undefined);\n\n  const loadImage = useCallback(\n    (src: string | ArrayBuffer | null) => {\n      if (typeof src == \"object\") {\n        return;\n      }\n      console.log(\"Load Image\");\n      let img = new Image();\n      img.src = src || textureImage;\n      img.onload = () => {\n        console.log(\"Image loaded\");\n        canvasRef!.current!.width = img!.width;\n        canvasRef!.current!.height = img!.height;\n        const gl = canvasRef!.current!.getContext(\"webgl2\")!;\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n        setImage(img);\n      };\n    },\n    [canvasRef]\n  );\n\n  const bgHandle = (val: String | string[]) => {\n    if (typeof val == \"string\") {\n      let obj = { ...form, background: val as BaseCanvas };\n      setForm(obj);\n    }\n  };\n\n  const uploadImage = () => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \"image/*\";\n    input.onchange = () => {\n      if (input.files![0]) {\n        var reader = new FileReader();\n        reader.onload = (event) => {\n          loadImage(event.target!.result);\n        };\n        reader.readAsDataURL(input.files![0]);\n      }\n    };\n    input.click();\n  };\n\n  const downloadImage = () => {\n    const url = canvasRef!.current!.toDataURL(\"image/png\");\n    const a = document.createElement(\"a\");\n    a.download = \"download\";\n    a.href = url;\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n  };\n\n  //当shader变化的时候，重新编译＆绘图\n  useEffect(() => {\n    try {\n      if (!autoRun) {\n        return;\n      }\n      const gl = canvasRef!.current!.getContext(\"webgl2\", {\n        preserveDrawingBuffer: true,\n      });\n      image && draw(gl, props.vertexSource, props.fragmentSource, image, time);\n\n      // 设置时间\n      const gap = 100.0;\n      if (props.fragmentSource.match(/uTime/g)) {\n        if (timer == null) {\n          setTime(0);\n          const newTimer = window.setInterval(\n            () => setTime((oldTime) => oldTime + gap / 1000.0),\n            gap\n          );\n          setTimer(newTimer);\n        }\n      } else if (timer != null) {\n        window.clearInterval(timer);\n        setTimer(null);\n      }\n\n      setError(\"\");\n    } catch (e: any) {\n      if (timer != null) {\n        window.clearInterval(timer);\n        setTimer(null);\n      }\n      setError(e.message);\n    }\n  }, [image, props, time, timer, autoRun]); // time每秒都在变化，每秒更新一回\n\n  useEffect(() => {\n    switch (form.background) {\n      case \"Image\":\n        loadImage(textureImage);\n        break;\n      case \"Image2\":\n        loadImage(textureImage2);\n        break;\n      default:\n        break;\n    }\n  }, [form.background, loadImage]);\n\n  return (\n    <Grid.Container direction=\"column\">\n      <div style={{ textAlign: \"center\" }}>\n        <canvas\n          ref={canvasRef}\n          style={{ height: \"50vh\", width: \"100%\", objectFit: \"contain\" }}\n        ></canvas>\n      </div>\n      <Divider />\n      <form>\n        <div className=\"row\">\n          <Text>背景</Text>\n          <Select\n            placeholder=\"选择背景\"\n            onChange={bgHandle}\n            value={form.background}\n          >\n            <Select.Option value=\"Image\">图片一</Select.Option>\n            <Select.Option value=\"Image2\">图片二</Select.Option>\n            <Select.Option value=\"CustomImage\">自定义图片</Select.Option>\n          </Select>\n          {form.background === \"CustomImage\" && (\n            <>\n              <Button\n                scale={0.8}\n                icon={<Upload />}\n                type=\"secondary\"\n                onClick={uploadImage}\n                auto\n              >\n                上传图片\n              </Button>\n              <Button\n                scale={0.8}\n                icon={<Download />}\n                onClick={downloadImage}\n                auto\n              >\n                下载图片\n              </Button>\n            </>\n          )}\n        </div>\n        <div className=\"row\">\n          <Text>自动运行</Text>\n          <Toggle\n            checked={autoRun}\n            onChange={(e) => setAutoRun(e.target.checked)}\n          />\n        </div>\n        <Textarea\n          value={error ? error : \"\"}\n          width=\"100%\"\n          style={{ minHeight: \"150px\" }}\n          readOnly\n        ></Textarea>\n      </form>\n    </Grid.Container>\n  );\n}\n\nexport default ZCanvas;\n","import { useEffect, useState } from \"react\";\nimport { Input, Card, Text } from \"@geist-ui/core\";\n\nfunction rgb2vec(rgb: string) {\n  const reg = /#?(?<R>[0-9a-f]{2})(?<G>[0-9a-f]{2})(?<B>[0-9a-f]{2})/g;\n  const m = reg.exec(rgb.toLowerCase());\n  if (m) {\n    const r = (parseInt(m.groups!.R, 16) / 255).toFixed(2);\n    const g = (parseInt(m.groups!.G, 16) / 255).toFixed(2);\n    const b = (parseInt(m.groups!.B, 16) / 255).toFixed(2);\n    return `(${r},${g},${b})`;\n  } else {\n    throw new Error(\"Invaild Input\");\n  }\n}\n\nfunction RGB2Vec() {\n  const [rgbInput, setRgbInput] = useState(\"\");\n  const [rgbOutput, setRgbOutput] = useState(\"\");\n\n  useEffect(() => {\n    let out = \"\";\n    try {\n      out = rgb2vec(rgbInput);\n    } catch (_e) {}\n    setRgbOutput(out);\n  }, [rgbInput]);\n\n  return (\n    <div className=\"row\">\n      <Text>RGB 转 vec3</Text>\n      <Input\n        value={rgbInput}\n        placeholder=\"#79FFE1\"\n        onChange={(e: any) => setRgbInput(e.target.value)}\n      />\n      <Input readOnly value={rgbOutput} placeholder=\"(0.47,1.00,0.88)\" />\n    </div>\n  );\n}\n\nfunction Tools() {\n  return (\n    <Card>\n      <RGB2Vec />\n    </Card>\n  );\n}\n\nexport default Tools;\n","import { Card, Select, Text } from \"@geist-ui/core\";\nimport { codeMirrorThemeNames } from \"../utils/data.js\";\n\ninterface ISettings {\n  cmTheme: string;\n  theme: string;\n}\n\ninterface ISettingsProp {\n  prop: ISettings;\n  onChange: (a: ISettings) => void;\n}\n\nexport const defaultSettings = { cmTheme: \"3024-day\", theme: \"light\" };\n\nconst Settings = (props: ISettingsProp) => {\n  const SetCodeMirrorTheme = () => {\n    return (\n      <div className=\"row\">\n        <Text>选择 CodeMirror 主题</Text>\n        <Select\n          placeholder=\"选择主题\"\n          value={props.prop.cmTheme}\n          onChange={(val) =>\n            props.onChange({ ...props.prop, cmTheme: val as string })\n          }\n        >\n          {codeMirrorThemeNames.map((val) => (\n            <Select.Option value={val} key={val}>\n              {val}\n            </Select.Option>\n          ))}\n        </Select>\n      </div>\n    );\n  };\n\n  return (\n    <Card>\n      <SetCodeMirrorTheme />\n    </Card>\n  );\n};\n\nexport default Settings;\n","import { Button, Modal, Grid } from \"@geist-ui/core\";\nimport { preset } from \"../utils/data.js\";\n\nexport interface Preset {\n  name: string;\n  vex: string;\n  frag: string;\n}\n\ninterface IPresetModal {\n  onPreset: (a: Preset) => void;\n  onClose: () => void;\n  visible:boolean;\n}\n\nfunction PresetModal(props: IPresetModal) {\n  const closeHandler = () => {\n    props.onClose()\n  };\n  return (    \n      <Modal visible={props.visible} onClose={closeHandler} width=\"30rem\">\n        <Modal.Title>选择预设</Modal.Title>\n        <Modal.Content>\n          <Grid.Container gap={2}>\n            {preset.map((item, index) => {\n              return (\n                <Grid key={index} xs={12}>\n                  <Button\n                    onClick={() => {\n                      props.onPreset(item);\n                      closeHandler();\n                    }}\n                    key={index}\n                    style={{width:\"100%\"}}\n                  >\n                    {item.name}\n                  </Button>\n                </Grid>\n              );\n            })}\n          </Grid.Container>\n        </Modal.Content>\n        <Modal.Action passive onClick={closeHandler}>\n          关闭\n        </Modal.Action>\n      </Modal>\n  );\n}\n\nexport default PresetModal;\n","//显示支持的变量\nimport { Modal, Table, Code } from \"@geist-ui/core\";\nimport { note } from \"../utils/data.js\";\n\ninterface IModal {\n  visible: boolean;\n  onClose: () => void;\n}\n\nfunction VaribleModal(props: IModal) {\n  const closeHandler = () => {\n    props.onClose();\n  };\n  const data = note.map((val) => ({ ...val, name: <Code>{val.name}</Code> }));\n\n  return (\n    <Modal visible={props.visible} onClose={closeHandler} width=\"35rem\">\n      <Modal.Content>\n        <Table data={data}>\n          <Table.Column prop=\"attribute\" label=\"属性\" />\n          <Table.Column prop=\"type\" label=\"类型\" />\n          <Table.Column prop=\"name\" label=\"名称\" />\n          <Table.Column prop=\"description\" label=\"描述\" />\n        </Table>\n      </Modal.Content>\n      <Modal.Action passive onClick={closeHandler}>\n        关闭\n      </Modal.Action>\n    </Modal>\n  );\n}\n\nexport default VaribleModal;\n","import { Modal, Badge } from \"@geist-ui/core\";\nimport pkg from \"../../package.json\";\n\ninterface IModal {\n  visible: boolean;\n  onClose: () => void;\n}\n\nfunction CreditModal(props: IModal) {\n  return (\n    <Modal visible={props.visible} onClose={props.onClose} width=\"35rem\">\n      <Modal.Content>\n        <p>\n          <b>Z Shader Viewer </b>\n          <Badge scale={0.8}>v.{pkg.version}</Badge>\n        </p>\n        <p>2020 - {new Date().getFullYear()} By owlzou</p>\n\n        <p>鸣谢：</p>\n        <ul>\n          <li>\n            <a href=\"https://github.com/facebook/create-react-app\">\n              create-react-app\n            </a>\n          </li>\n          <li>\n            <a href=\"https://github.com/scniro/react-codemirror2\">\n              react-codemirror2\n            </a>\n          </li>\n          <li>\n            <a href=\"https://github.com/geist-org/react\">geist-ui</a>\n          </li>\n        </ul>\n        <p>APP中使用的默认图片来自于Unsplash：</p>\n        <ul>\n          <li>\n            Photo by{\" \"}\n            <a href=\"https://unsplash.com/@yessijes?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">\n              Jessica Pamp\n            </a>{\" \"}\n            on{\" \"}\n            <a href=\"https://unsplash.com/@yessijes?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">\n              Unsplash\n            </a>\n          </li>\n          <li>\n            Photo by{\" \"}\n            <a href=\"https://unsplash.com/@pwign?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">\n              Anh Nguyen\n            </a>{\" \"}\n            on{\" \"}\n            <a href=\"https://unsplash.com/@pwign?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">\n              Unsplash\n            </a>\n          </li>\n        </ul>\n      </Modal.Content>\n      <Modal.Action passive onClick={props.onClose}>\n        关闭\n      </Modal.Action>\n    </Modal>\n  );\n}\n\nexport default CreditModal;\n","import \"./App.css\";\nimport { useEffect, useState } from \"react\";\nimport {\n  Button,\n  Text,\n  Badge,\n  Grid,\n  Tabs,\n  CssBaseline,\n  GeistProvider,\n  Themes,\n} from \"@geist-ui/core\";\nimport { Github, Folder, Info, Lambda, Sun, Moon } from \"@geist-ui/icons\";\nimport Cmirror from \"./Components/Cmirror\";\n//\nimport logo from \"./assets/favicon-32x32.png\";\nimport { preset } from \"./utils/data.js\";\n//\nimport ZCanvas from \"./Components/ZCanvas\";\nimport Tools from \"./Components/Tools\";\nimport Settings, { defaultSettings } from \"./Components/Settings\";\n// Modals\nimport PresetModal, { Preset } from \"./Components/PresetModal\";\nimport VaribleModal from \"./Components/VaribleModal\";\nimport CreditModal from \"./Components/CreditModal\";\n\nfunction App() {\n  const [vertexSource, setVertexSource] = useState(preset[0].vex);\n  const [fragmentSource, setFragmentSource] = useState(preset[0].frag);\n  // Modal\n  const [presetModalVisible, setPresetModalVisible] = useState(false);\n  const [creditModalVisible, setCreditModalVisible] = useState(false);\n  const [varibleModalVisible, setVaribleModalVisible] = useState(false);\n  // Theme\n  // const [themeType, setThemeType] = useState(\"light\");\n  const [settings, setSettings] = useState(defaultSettings);\n\n  // init\n  useEffect(() => {\n    const storage = window.localStorage;\n    try {\n      setSettings(JSON.parse(storage[\"settings\"]));\n    } catch (_e) {}\n  }, []);\n\n  const switchThemes = () => {\n    const news = {\n      ...settings,\n      theme: settings.theme === \"softDark\" ? \"light\" : \"softDark\",\n    };\n    setSettings(news);\n    const storage = window.localStorage;\n    storage[\"settings\"] = JSON.stringify(news);\n  };\n\n  const softDarkTheme = Themes.createFromDark({\n    type: \"softDark\",\n    palette: {\n      //todo\n    },\n  });\n\n  const onPreset = (preset: Preset) => {\n    console.log(`Load preset ${preset.name}`);\n    setVertexSource(preset.vex);\n    setFragmentSource(preset.frag);\n  };\n\n  const Header = () => (\n    <Grid.Container gap={2} alignContent=\"center\">\n      <Grid sm={24} md={12}>\n        <img src={logo} style={{ marginRight: \"10px\" }} alt=\"logo\"></img>\n        <Badge.Anchor>\n          <Text h4 style={{ margin: \"0\" }}>\n            Z ShaderViewer\n          </Text>\n          <Badge scale={0.8}>Beta</Badge>\n        </Badge.Anchor>\n      </Grid>\n      <Grid.Container justify=\"flex-end\" alignContent=\"center\" sm={24} md={12}>\n        <Grid>\n          <Button\n            icon={settings.theme === \"light\" ? <Sun /> : <Moon />}\n            auto\n            type=\"abort\"\n            onClick={() => switchThemes()}\n          >\n            {settings.theme === \"light\" ? \"白天\" : \"黑夜\"}\n          </Button>\n        </Grid>\n        <Grid>\n          <Button\n            icon={<Lambda />}\n            auto\n            type=\"abort\"\n            onClick={() => setVaribleModalVisible(true)}\n          >\n            变量支持\n          </Button>\n        </Grid>\n        <Grid>\n          <Button\n            icon={<Folder />}\n            auto\n            type=\"abort\"\n            onClick={() => setPresetModalVisible(true)}\n          >\n            加载预设\n          </Button>\n        </Grid>\n        <Grid>\n          <Button\n            icon={<Info />}\n            auto\n            type=\"abort\"\n            onClick={() => setCreditModalVisible(true)}\n          >\n            关于\n          </Button>\n        </Grid>\n        <Grid>\n          <Button\n            icon={<Github />}\n            auto\n            type=\"abort\"\n            onClick={() => {\n              window.open(\"https://github.com/owlzou/zsv\", \"_blank\");\n            }}\n          >\n            Github\n          </Button>\n        </Grid>\n      </Grid.Container>\n    </Grid.Container>\n  );\n\n  return (\n    <GeistProvider themes={[softDarkTheme]} themeType={settings.theme}>\n      <CssBaseline />\n      <div className=\"App\">\n        <Header />\n        <Grid.Container gap={2} style={{ padding: \"0 20px\" }}>\n          <Grid sm={24} md={12}>\n            <ZCanvas\n              vertexSource={vertexSource}\n              fragmentSource={fragmentSource}\n            ></ZCanvas>\n          </Grid>\n          <Grid sm={24} md={12}>\n            <link\n              rel=\"stylesheet\"\n              href={`https://unpkg.com/codemirror@5.59.0/theme/${settings.cmTheme}.css`}\n            />\n            <Tabs initialValue=\"2\" style={{ width: \"100%\" }}>\n              <Tabs.Item label=\"顶点着色器\" value=\"1\">\n                <Cmirror\n                  value={vertexSource}\n                  theme={settings.cmTheme}\n                  onChange={(code: string) => {\n                    setVertexSource(code);\n                  }}\n                ></Cmirror>\n              </Tabs.Item>\n              <Tabs.Item label=\"片段着色器\" value=\"2\">\n                <Cmirror\n                  value={fragmentSource}\n                  theme={settings.cmTheme}\n                  onChange={(code: string) => setFragmentSource(code)}\n                ></Cmirror>\n              </Tabs.Item>\n              <Tabs.Item label=\"工具\" value=\"3\">\n                <Tools />\n              </Tabs.Item>\n              <Tabs.Item label=\"设置\" value=\"4\">\n                <Settings\n                  prop={settings}\n                  onChange={(val) => {\n                    const storage = window.localStorage;\n                    storage[\"settings\"] = JSON.stringify(val);\n                    setSettings(val);\n                  }}\n                />\n              </Tabs.Item>\n            </Tabs>\n          </Grid>\n        </Grid.Container>\n      </div>\n      <PresetModal\n        onPreset={onPreset}\n        visible={presetModalVisible}\n        onClose={() => setPresetModalVisible(false)}\n      />\n      <VaribleModal\n        visible={varibleModalVisible}\n        onClose={() => setVaribleModalVisible(false)}\n      />\n      <CreditModal\n        visible={creditModalVisible}\n        onClose={() => setCreditModalVisible(false)}\n      />\n    </GeistProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { GeistProvider, CssBaseline } from \"@geist-ui/core\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <GeistProvider>\n      <CssBaseline />\n      <App />\n    </GeistProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}